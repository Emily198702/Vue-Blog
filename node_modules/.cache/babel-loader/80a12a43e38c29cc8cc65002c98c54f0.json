{"remainingRequest":"/Users/xuying/VueProjects/gblog/node_modules/babel-loader/lib/index.js!/Users/xuying/VueProjects/gblog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuying/VueProjects/gblog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuying/VueProjects/gblog/src/components/ManageList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuying/VueProjects/gblog/src/components/ManageList.vue","mtime":1568080105000},{"path":"/Users/xuying/VueProjects/gblog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuying/VueProjects/gblog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuying/VueProjects/gblog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuying/VueProjects/gblog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport qs from 'qs';\nimport { Page, Input } from 'iview';\nexport default {\n  data: function data() {\n    return {\n      typeList: [],\n      blogList: [],\n      count: 0,\n      totalPage: [],\n      pageSize: 10,\n      dataShow: [],\n      currentPage: 1,\n      searchStr: \"\"\n    };\n  },\n  methods: {\n    getType: function getType() {\n      var _this = this; //console.log(\"list\")\n\n\n      axios.get('http://localhost:8000/blogType').then(function (response) {\n        //console.log(response.data);          \n        _this.typeList = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    getList: function getList(code) {\n      var _this = this;\n\n      console.log(\"getList\");\n\n      if (!code) {\n        code = \"ALL\";\n      }\n\n      axios.get('http://localhost:8000/blogs?code=' + code).then(function (response) {\n        _this.blogList = response.data;\n        _this.count = _this.blogList.length;\n\n        if (_this.count < _this.pageSize) {\n          _this.dataShow = _this.blogList;\n        } else {\n          _this.dataShow = _this.blogList.slice(0, _this.pageSize);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    getListByTitle: function getListByTitle(code) {\n      var _this = this;\n\n      console.log(\"getListByTitle\");\n\n      if (!this.searchStr) {\n        return;\n      }\n\n      axios.get('http://localhost:8000/blogsByTitle?searchStr=' + this.searchStr).then(function (response) {\n        _this.blogList = response.data;\n        _this.count = _this.blogList.length;\n\n        if (_this.count < _this.pageSize) {\n          _this.dataShow = _this.blogList;\n        } else {\n          _this.dataShow = _this.blogList.slice(0, _this.pageSize);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    changePage: function changePage(index) {\n      console.log(this.pageSize);\n\n      var _start = (index - 1) * this.pageSize;\n\n      var _end = index * this.pageSize;\n\n      this.dataShow = this.blogList.slice(_start, _end);\n    },\n    sizeChange: function sizeChange(index) {\n      this.pageSize = index;\n      this.changePage(1);\n    },\n    showDetail: function showDetail(id) {\n      this.$router.push(\"/detail/\" + id);\n    },\n    newBlog: function newBlog() {\n      this.$router.push(\"/newBlog\");\n    },\n    edit: function edit(id) {\n      this.$router.push(\"/newBlog/\" + id);\n    },\n    del: function del(id) {\n      var _this2 = this;\n\n      console.log(id);\n      var data = {\n        id: id\n      };\n      axios.post('http://localhost:8000/delBlog', qs.stringify(data)).then(function (res) {\n        console.log('res=>', res);\n\n        if (res.data == 1) {\n          _this2.$Message.info('删除成功！');\n\n          _this2.getList();\n        } else {\n          _this2.$Message.info('删除失败！');\n        }\n      });\n    },\n    selectByType: function selectByType(code) {\n      this.getList(code);\n    }\n  },\n  mounted: function mounted() {\n    this.getList();\n    this.getType();\n  }\n};",{"version":3,"sources":["ManageList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    \n    <div class=\"blogbody\">\n      \n        <div class=\"column1\">\n            <div >\n                <div class=\"connHead\">\n                    <span>博文</span>\n                    <span>[管理]</span>\n                </div>\n                <div class=\"connBody\">\n                    <ul>\n                        <li>\n                            <a class=\"\" @click=\"selectByType('ALL')\">全部博文</a> \n                        </li>\n\n                        <li v-for=\"type in typeList\"  v-bind:key=\"type.id\">\n                            <a class=\"\" @click=\"selectByType(type.code)\">{{type.value}}</a> \n                        </li>\n                    \n                    </ul>\n                \n                </div>\n            </div>\n\n            <div style=\"margin-top:10px\">\n                <div class=\"connHead\">\n                    <span>搜博文</span>\n                </div>\n                <div class=\"connBody\">\n                     <Input v-model=\"searchStr\" search placeholder=\"请输入内容\" @on-search=\"getListByTitle\" />\n                </div>\n            </div>\n\n        </div>\n        <div class=\"column2 \">\n            <div class=\"connHead\">\n                <span>全部博文({{count}})</span> \n            </div>\n            <div class=\"connBody\">\n                <ul>\n                    <li v-for=\"blog in dataShow\" class=\"blog-li\" v-bind:key=\"blog.id\">\n                        \n                        <div class=\"blog-title\"><a class=\"\" @click=\"showDetail(blog.id)\">{{blog.title}}</a> </div>\n                        <span> \n                            <a class=\"blog-edit\" v-on:click=\"edit(blog.id)\">编辑</a> \n                            |<a class=\"blog-edit\" v-on:click=\"del(blog.id)\">删除</a> \n                        </span>\n                        \n                    </li>\n                </ul>\n\n                \n                <div class=\"blogpage\">\n                    <Page :current=\"currentPage\" :total=\"count\" :page-size=\"pageSize\" show-total \n                    @on-change=\"changePage\" @on-page-size-change=\"sizeChange\" show-sizer   />\n                </div>\n            </div>\n            \n        </div>\n\n    </div>\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport qs from 'qs'\nimport { Page,Input } from 'iview';\n\nexport default {\n    data(){\n        return {\n            typeList:[],\n            blogList:[],\n            count:0,\n            totalPage:[],\n            pageSize:10, \n            dataShow:[],\n            currentPage:1,\n            searchStr:\"\"\n        }\n    },\n    methods:{\n         getType(){\n            let _this = this\n            //console.log(\"list\")\n            axios.get('http://localhost:8000/blogType')\n            .then(function (response) {\n                //console.log(response.data);          \n                _this.typeList = response.data\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n \n         },\n\n         \n        \n         getList(code){\n            \n            let _this = this\n            console.log(\"getList\")\n            if(!code){\n                code = \"ALL\"\n            }  \n            axios.get('http://localhost:8000/blogs?code='+code)\n            .then(function (response) {  \n                _this.blogList = response.data;\n                _this.count = _this.blogList.length\n                \n                if(_this.count<_this.pageSize){\n                    _this.dataShow = _this.blogList\n                }else{\n                    _this.dataShow=_this.blogList.slice(0,_this.pageSize)\n                }\n                \n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n        },\n\n        getListByTitle(code){\n            \n            let _this = this\n            console.log(\"getListByTitle\")\n            if(!this.searchStr){\n                return\n            }  \n\n            axios.get('http://localhost:8000/blogsByTitle?searchStr='+this.searchStr)\n            .then(function (response) {  \n                _this.blogList = response.data;\n                _this.count = _this.blogList.length\n                \n                if(_this.count<_this.pageSize){\n                    _this.dataShow = _this.blogList\n                }else{\n                    _this.dataShow=_this.blogList.slice(0,_this.pageSize)\n                }\n                \n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n        },\n        \n        changePage(index){\n            console.log(this.pageSize)\n            var _start = (index-1)*this.pageSize\n            var _end = index * this.pageSize\n            this.dataShow = this.blogList.slice(_start,_end)\n        },\n\n        sizeChange(index){\n            this.pageSize = index\n            this.changePage(1)\n        },\n        \n         showDetail(id){\n            this.$router.push(\"/detail/\"+id)\n        },\n\n         newBlog(){\n            this.$router.push(\"/newBlog\")\n         },\n\n        edit(id){\n             this.$router.push(\"/newBlog/\"+id)\n         },\n\n        del(id){\n            console.log(id)\n            let data = {id : id}\n            axios.post('http://localhost:8000/delBlog',qs.stringify(data))\n            .then(res=>{\n                console.log('res=>',res);\n                if(res.data == 1){\n                    this.$Message.info('删除成功！');\n                    this.getList()\n                }else{\n                    this.$Message.info('删除失败！');\n                }           \n            })\n         },\n\n        selectByType(code) {\n             this.getList(code)\n        }\n\n    },\n\n    mounted(){\n        this.getList()\n        this.getType()\n        \n    }\n\n}\n</script>\n\n\n<style>\n\n.blogbody {\n    width: 950px;\n    clear: both;\n    margin: 0 auto;\n    z-index: 10; \n}\n\n.column1{\n    width: 210px;\n    display: inline; \n    overflow: hidden;\n    float: left;\n }\n\n\n.column2{\n    width: 700px;\n    display: inline; \n    overflow: hidden;\n    float: left;\n    margin-left:10px\n }\n\n.connHead{\n    display: flex;\n    justify-content:space-between;\n    color:#767775;\n    height: 24px;\n    overflow: hidden;\n    background-color:#f4f4f4;\n    font-family: \"宋体\",sans-serif;\n    font-size: 12px; \n    font-weight: 700;\n    padding-left: 8px;\n    padding-top: 3px;\n}\n\na.blog-edit {\n    font-family: \"宋体\";\n    font-size: 12px;\n    font-weight: 400;\n    white-space: nowrap;\n    zoom: 1;\n    color: red;\n}\n\n \n\n.connBody{\n    \n    clear: both;\n    padding: 10px 10px;\n    zoom: 1;\n    overflow: hidden;\n    font-size: 14px;\n    background-color: #fefefe;\n    \n}\n\nul{\n    list-style-position: inside;\n    list-style-type: disc;\n\n}\n\n \n\n.blog-li{\n    display: flex;\n    justify-content:space-between;\n    padding: 4px;\n    border-bottom: 1px dotted #c8d9d1;\n}\n\n.blog-title{\n    width:70%;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.blogpage{\n    margin-top: 10px;\n    text-align: right;\n}\n\n \n</style>\n\n"],"sourceRoot":"src/components"}]}